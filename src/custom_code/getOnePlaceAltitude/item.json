{
    "system_name": "Bookings",
    "path": null,
    "target": 2,
    "type": 0,
    "comment_type": 1,
    "joomla_version": 5,
    "function_name": "getOnePlaceAltitude",
    "code": "\/\/ --- CUSTOM ENRICHMENT START getOnePlaceAltitude ---\r\n\/\/ We are inside getItem, so we work directly with the single item object\r\n$item = $this->_item[$pk];\r\n\r\nif ($item && isset($item->place_id) && $item->place_id > 0) \r\n{\r\n    $db = $this->getDatabase();\r\n    $query = $db->getQuery(true);\r\n\r\n    $query->select($db->quoteName('altitude'))\r\n          ->from($db->quoteName('#__bookings_place'))\r\n          ->where($db->quoteName('id') . ' = ' . (int) $item->place_id);\r\n\r\n    $db->setQuery($query);\r\n\r\n\techo \"pk $pk data-id $data->id $data->place_id $this->_item[$pk]->place_id  Item-id $item->id item-place_id $item->place_id item[pk] $this->_item[$pk]->id\";\r\n    try {\r\n        $altitude = $db->loadResult();\r\n        \/\/ Assign the retrieved value to the property\r\n        $item->place_altitude = $altitude;\r\n    } catch (\\Exception $e) {\r\n        Factory::getApplication()->enqueueMessage('Database Error in Place Altitude Lookup: ' . $e->getMessage(), 'error');\r\n    }\r\n}\r\n\/\/ --- CUSTOM ENRICHMENT END ---\r\n",
    "hashendtarget": "0",
    "to_line": "296",
    "from_line": "260",
    "hashtarget": "10__0ce49fd9d2907b3a6249cab36b39bda5",
    "component": ""
}